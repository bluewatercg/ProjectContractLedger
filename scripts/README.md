# Scripts æ–‡ä»¶å¤¹è¯´æ˜

æœ¬æ–‡ä»¶å¤¹åŒ…å«é¡¹ç›®çš„å„ç§è„šæœ¬æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ„å»ºè„šæœ¬ã€å¼€å‘å·¥å…·è„šæœ¬å’Œå®ç”¨å·¥å…·ã€‚

## ğŸ“ æ–‡ä»¶å¤¹ç»“æ„

```
scripts/
â”œâ”€â”€ build/            # æ„å»ºç›¸å…³è„šæœ¬
â”œâ”€â”€ dev/              # å¼€å‘ç¯å¢ƒè„šæœ¬
â””â”€â”€ utils/            # å®ç”¨å·¥å…·è„šæœ¬
```

## ğŸ”¨ Build æ„å»ºè„šæœ¬ (`scripts/build/`)

### Dockeræ„å»ºè„šæœ¬
| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | ç»´æŠ¤çŠ¶æ€ |
|---------|------|----------|
| `build-image.sh` | Dockeré•œåƒæ„å»ºè„šæœ¬ | âœ… ç”Ÿäº§å°±ç»ª |

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- è‡ªåŠ¨åŒ–Dockeré•œåƒæ„å»º
- æ”¯æŒå¤šç§é•œåƒæ ‡ç­¾
- æ”¯æŒé•œåƒä»“åº“æ¨é€
- æ„å»ºè¿‡ç¨‹éªŒè¯
- è¯¦ç»†çš„æ„å»ºæ—¥å¿—
- æ„å»ºæ—¶é—´ç»Ÿè®¡
- æ‚¬ç©ºé•œåƒæ¸…ç†

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# åŸºæœ¬æ„å»º
./scripts/build/build-image.sh

# æŒ‡å®šé•œåƒåç§°å’Œæ ‡ç­¾
./scripts/build/build-image.sh contract-ledger v1.0.0

# æ„å»ºå¹¶æ¨é€åˆ°ä»“åº“
./scripts/build/build-image.sh contract-ledger latest ghcr.milu.moe true
```

**å‚æ•°è¯´æ˜**ï¼š
- `$1`: é•œåƒåç§° (é»˜è®¤: contract-ledger)
- `$2`: é•œåƒæ ‡ç­¾ (é»˜è®¤: latest)
- `$3`: é•œåƒä»“åº“ (å¯é€‰)
- `$4`: æ˜¯å¦æ¨é€ (é»˜è®¤: false)

## ğŸ’» Dev å¼€å‘è„šæœ¬ (`scripts/dev/`)

### å®¹å™¨å¯åŠ¨è„šæœ¬
| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | ç»´æŠ¤çŠ¶æ€ |
|---------|------|----------|
| `start.sh` | å®¹å™¨å†…åº”ç”¨å¯åŠ¨è„šæœ¬ | âœ… ç”Ÿäº§å°±ç»ª |

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- å‰åç«¯æœåŠ¡åè°ƒå¯åŠ¨
- ç¯å¢ƒå˜é‡åŠ¨æ€æ³¨å…¥
- å¥åº·æ£€æŸ¥å’Œç›‘æ§
- ä¼˜é›…å…³é—­å¤„ç†
- æ—¥å¿—ç®¡ç†
- é”™è¯¯æ¢å¤æœºåˆ¶

### æœ¬åœ°å¼€å‘è„šæœ¬
| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | ç»´æŠ¤çŠ¶æ€ |
|---------|------|----------|
| `start-dev.bat` | Windowså¼€å‘ç¯å¢ƒå¯åŠ¨ | âœ… å¼€å‘å·¥å…· |
| `start-dev.sh` | Linuxå¼€å‘ç¯å¢ƒå¯åŠ¨ | âœ… å¼€å‘å·¥å…· |
| `start-dev.ps1` | PowerShellå¼€å‘ç¯å¢ƒå¯åŠ¨ | âœ… å¼€å‘å·¥å…· |
| `start-simple.bat` | Windowsç®€åŒ–å¯åŠ¨è„šæœ¬ | âœ… å¼€å‘å·¥å…· |

**å¹³å°æ”¯æŒ**ï¼š
- **Windows**: `.bat` å’Œ `.ps1` è„šæœ¬
- **Linux/Mac**: `.sh` è„šæœ¬
- **è·¨å¹³å°**: ç»Ÿä¸€çš„åŠŸèƒ½å’Œä½“éªŒ

**åŠŸèƒ½å¯¹æ¯”**ï¼š

#### start-dev.bat (Windowså®Œæ•´ç‰ˆ)
```batch
ç‰¹ç‚¹:
- è‡ªåŠ¨æ£€æŸ¥å’Œå®‰è£…ä¾èµ–
- åˆ†åˆ«å¯åŠ¨å‰åç«¯æœåŠ¡
- æ˜¾ç¤ºæœåŠ¡çŠ¶æ€å’Œè®¿é—®åœ°å€
- åŒ…å«æ•°æ®åº“è¿æ¥ä¿¡æ¯
- æä¾›é»˜è®¤ç™»å½•è´¦æˆ·ä¿¡æ¯
```

#### start-dev.sh (Linuxç‰ˆæœ¬)
```bash
ç‰¹ç‚¹:
- ä½¿ç”¨gnome-terminalå¯åŠ¨æœåŠ¡
- åå°è¿è¡Œå‰åç«¯æœåŠ¡
- ç®€æ´çš„çŠ¶æ€æ˜¾ç¤º
- é€‚åˆLinuxæ¡Œé¢ç¯å¢ƒ
```

#### start-simple.bat (ç®€åŒ–ç‰ˆ)
```batch
ç‰¹ç‚¹:
- å¿«é€Ÿå¯åŠ¨ï¼Œæœ€å°‘äº¤äº’
- åŸºæœ¬çš„ä¾èµ–æ£€æŸ¥
- é€‚åˆç†Ÿæ‚‰é¡¹ç›®çš„å¼€å‘è€…
- è½»é‡çº§å¯åŠ¨æµç¨‹
```

## ğŸ› ï¸ Utils å®ç”¨å·¥å…· (`scripts/utils/`)

### ç¯å¢ƒå˜é‡å·¥å…·
| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | ç»´æŠ¤çŠ¶æ€ |
|---------|------|----------|
| `inject-env-vars.sh` | å‰ç«¯ç¯å¢ƒå˜é‡æ³¨å…¥è„šæœ¬ | âœ… ç”Ÿäº§å°±ç»ª |

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- åŠ¨æ€ç”Ÿæˆå‰ç«¯é…ç½®æ–‡ä»¶
- è¿è¡Œæ—¶ç¯å¢ƒå˜é‡æ³¨å…¥
- è‡ªåŠ¨æ³¨å…¥åˆ°HTMLæ–‡ä»¶
- æ”¯æŒå¤šç§é…ç½®å‚æ•°
- å®¹å™¨åŒ–ç¯å¢ƒé€‚é…

### é¡¹ç›®æ£€æŸ¥å·¥å…·
| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | ç»´æŠ¤çŠ¶æ€ |
|---------|------|----------|
| `check-github-actions.sh` | GitHub Actionsè¯Šæ–­å·¥å…· | âœ… å¼€å‘å·¥å…· |
| `check-github-actions.bat` | Windowsç‰ˆGitHub Actionsè¯Šæ–­ | âœ… å¼€å‘å·¥å…· |
| `check-project-status.bat` | é¡¹ç›®çŠ¶æ€æ£€æŸ¥å·¥å…· | âœ… å¼€å‘å·¥å…· |

**è¯Šæ–­åŠŸèƒ½**ï¼š
- Gité…ç½®æ£€æŸ¥
- å·¥ä½œæµæ–‡ä»¶éªŒè¯
- YAMLè¯­æ³•æ£€æŸ¥
- åˆ†æ”¯é…ç½®éªŒè¯
- æäº¤çŠ¶æ€æ£€æŸ¥
- Dockeré…ç½®æ£€æŸ¥

### é¡¹ç›®æ¸…ç†å·¥å…·
| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | ç»´æŠ¤çŠ¶æ€ |
|---------|------|----------|
| `clean-project.sh` | é¡¹ç›®æ¸…ç†è„šæœ¬ | âœ… å¼€å‘å·¥å…· |
| `clean-project.bat` | Windowsç‰ˆé¡¹ç›®æ¸…ç† | âœ… å¼€å‘å·¥å…· |

**æ¸…ç†å†…å®¹**ï¼š
- node_modulesç›®å½•
- yarn.lockæ–‡ä»¶
- ç¼–è¯‘è¾“å‡ºç›®å½•
- ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜
- ç¡®è®¤æç¤ºä¿æŠ¤

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. å¼€å‘ç¯å¢ƒå¯åŠ¨

#### Windowsç¯å¢ƒ
```batch
# å®Œæ•´ç‰ˆå¯åŠ¨ï¼ˆæ¨èæ–°æ‰‹ï¼‰
scripts\dev\start-dev.bat

# ç®€åŒ–ç‰ˆå¯åŠ¨ï¼ˆæ¨èç†Ÿæ‰‹ï¼‰
scripts\dev\start-simple.bat

# PowerShellç‰ˆæœ¬
scripts\dev\start-dev.ps1
```

#### Linux/Macç¯å¢ƒ
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/dev/start-dev.sh

# å¯åŠ¨å¼€å‘ç¯å¢ƒ
./scripts/dev/start-dev.sh
```

### 2. Dockeré•œåƒæ„å»º

#### åŸºæœ¬æ„å»º
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/build/build-image.sh

# æ‰§è¡Œæ„å»º
./scripts/build/build-image.sh
```

#### é«˜çº§æ„å»º
```bash
# æ„å»ºç‰¹å®šç‰ˆæœ¬å¹¶æ¨é€
./scripts/build/build-image.sh contract-ledger v1.2.0 ghcr.milu.moe true
```

### 3. é¡¹ç›®ç»´æŠ¤

#### çŠ¶æ€æ£€æŸ¥
```bash
# Windows
scripts\utils\check-project-status.bat

# Linux/Mac
chmod +x scripts/utils/check-github-actions.sh
./scripts/utils/check-github-actions.sh
```

#### é¡¹ç›®æ¸…ç†
```bash
# Windows
scripts\utils\clean-project.bat

# Linux/Mac
chmod +x scripts/utils/clean-project.sh
./scripts/utils/clean-project.sh
```

## ğŸ”§ è„šæœ¬é…ç½®

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# æ•°æ®åº“é…ç½®
DB_HOST=192.168.1.254
DB_PORT=3306
DB_NAME=procontractledger

# Redisé…ç½®
REDIS_HOST=192.168.1.160
REDIS_PORT=6379

# å‰ç«¯é…ç½®
FRONTEND_API_BASE_URL=/api
APP_TITLE=å®¢æˆ·åˆåŒç®¡ç†ç³»ç»Ÿ
```

### ç«¯å£é…ç½®
```bash
# é»˜è®¤ç«¯å£
FRONTEND_PORT=8000
BACKEND_PORT=8080

# å¼€å‘ç¯å¢ƒç«¯å£
DEV_FRONTEND_PORT=8000
DEV_BACKEND_PORT=8080
```

## ğŸ“Š è„šæœ¬ç›‘æ§

### æ„å»ºç›‘æ§
- æ„å»ºæ—¶é—´ç»Ÿè®¡
- æ„å»ºæˆåŠŸç‡è·Ÿè¸ª
- é•œåƒå¤§å°ç›‘æ§
- æ„å»ºæ—¥å¿—åˆ†æ

### å¼€å‘ç¯å¢ƒç›‘æ§
- æœåŠ¡å¯åŠ¨çŠ¶æ€
- ç«¯å£å ç”¨æ£€æŸ¥
- ä¾èµ–å®‰è£…çŠ¶æ€
- é”™è¯¯æ—¥å¿—æ”¶é›†

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

### è„šæœ¬æ‰§è¡Œæƒé™
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/**/*.sh

# æ£€æŸ¥è„šæœ¬æƒé™
ls -la scripts/
```

### æ•æ„Ÿä¿¡æ¯ä¿æŠ¤
- ä¸åœ¨è„šæœ¬ä¸­ç¡¬ç¼–ç å¯†ç 
- ä½¿ç”¨ç¯å¢ƒå˜é‡ä¼ é€’æ•æ„Ÿé…ç½®
- å®šæœŸæ£€æŸ¥è„šæœ¬ä¸­çš„æ•æ„Ÿä¿¡æ¯

## ğŸ“‹ ç»´æŠ¤æ¸…å•

### å®šæœŸç»´æŠ¤
1. **è„šæœ¬æ›´æ–°**: éšé¡¹ç›®éœ€æ±‚æ›´æ–°è„šæœ¬åŠŸèƒ½
2. **æƒé™æ£€æŸ¥**: ç¡®ä¿è„šæœ¬æœ‰æ­£ç¡®çš„æ‰§è¡Œæƒé™
3. **å…¼å®¹æ€§æµ‹è¯•**: æµ‹è¯•è„šæœ¬åœ¨ä¸åŒå¹³å°çš„å…¼å®¹æ€§
4. **æ–‡æ¡£åŒæ­¥**: ä¿æŒè„šæœ¬æ–‡æ¡£ä¸å®é™…åŠŸèƒ½åŒæ­¥

### æ•…éšœæ’é™¤
1. **æƒé™é—®é¢˜**: æ£€æŸ¥æ–‡ä»¶æ‰§è¡Œæƒé™
2. **è·¯å¾„é—®é¢˜**: ç¡®è®¤è„šæœ¬åœ¨æ­£ç¡®ç›®å½•æ‰§è¡Œ
3. **ä¾èµ–é—®é¢˜**: æ£€æŸ¥å¿…è¦çš„å·¥å…·æ˜¯å¦å®‰è£…
4. **ç¯å¢ƒé—®é¢˜**: éªŒè¯ç¯å¢ƒå˜é‡é…ç½®

## ğŸ—‘ï¸ æ¸…ç†å†å²

### å·²åˆ é™¤çš„è¿‡æ—¶æ–‡ä»¶
åœ¨é¡¹ç›®ç»´æŠ¤è¿‡ç¨‹ä¸­ï¼Œä»¥ä¸‹è¿‡æ—¶æ–‡ä»¶å·²è¢«æ¸…ç†ï¼š

#### ä¸´æ—¶ä¿®å¤æ–‡æ¡£ï¼ˆå·²è§£å†³çš„é—®é¢˜ï¼‰
- `final-permission-solution.md` - æƒé™é—®é¢˜è§£å†³æ–¹æ¡ˆ
- `frontend-build-fix-summary.md` - å‰ç«¯æ„å»ºä¿®å¤æ€»ç»“
- `npm-solution-summary.md` - NPMè§£å†³æ–¹æ¡ˆæ€»ç»“
- `vite-permission-fix-summary.md` - Viteæƒé™ä¿®å¤æ€»ç»“

#### ä¸´æ—¶æµ‹è¯•è„šæœ¬ï¼ˆå·²å®Œæˆä»»åŠ¡ï¼‰
- `test-dockerignore-fix.sh` - .dockerignoreä¿®å¤æµ‹è¯•
- `test-vite-permission-fix.sh` - Viteæƒé™ä¿®å¤æµ‹è¯•

### æ¸…ç†åŸåˆ™
- åˆ é™¤å·²è§£å†³é—®é¢˜çš„ä¸´æ—¶æ–‡æ¡£
- åˆ é™¤é‡å¤åŠŸèƒ½çš„è„šæœ¬
- ä¿ç•™æ ¸å¿ƒåŠŸèƒ½å’Œç”Ÿäº§ç¯å¢ƒå¿…éœ€è„šæœ¬
- ä¿æŒæ–‡ä»¶å¤¹ç»“æ„æ¸…æ™°ç®€æ´

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [å¯åŠ¨æŒ‡å—](../docs/user-guide/å¯åŠ¨æŒ‡å—.md)
- [Dockeræ„å»ºæŒ‡å—](../docs/deployment/docker-build-guide.md)
- [GitHub Actionséƒ¨ç½²æŒ‡å—](../docs/development/GitHub_Actions_éƒ¨ç½²æŒ‡å—.md)
- [é¡¹ç›®ç»“æ„è¯´æ˜](../docs/user-guide/é¡¹ç›®ç»“æ„è¯´æ˜-æ–°ç‰ˆ.md)
