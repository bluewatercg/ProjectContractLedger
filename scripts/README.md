# Scripts è‡ªåŠ¨åŒ–è„šæœ¬ç›®å½•

æœ¬ç›®å½•åŒ…å«é¡¹ç›®çš„å„ç§è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œç”¨äºç®€åŒ–å¼€å‘ã€æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²æµç¨‹ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œéƒ¨ç½²å¯é æ€§ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
scripts/
â”œâ”€â”€ README.md                    # æœ¬è¯´æ˜æ–‡ä»¶
â”œâ”€â”€ build/                      # æ„å»ºç›¸å…³è„šæœ¬
â”‚   â””â”€â”€ build-image.sh          # Dockeré•œåƒæ„å»ºè„šæœ¬
â”œâ”€â”€ dev/                        # å¼€å‘ç¯å¢ƒè„šæœ¬
â”‚   â”œâ”€â”€ start-dev.sh           # Linux/macOSå¼€å‘ç¯å¢ƒå¯åŠ¨
â”‚   â”œâ”€â”€ start-dev.ps1          # Windows PowerShellå¼€å‘ç¯å¢ƒå¯åŠ¨
â”‚   â”œâ”€â”€ start-dev.bat          # Windows CMDå¼€å‘ç¯å¢ƒå¯åŠ¨
â”‚   â”œâ”€â”€ start-simple.bat       # Windowsç®€åŒ–å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ start.sh               # é€šç”¨å¯åŠ¨è„šæœ¬
â”œâ”€â”€ utils/                      # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ check-github-actions.sh    # GitHub ActionsçŠ¶æ€æ£€æŸ¥
â”‚   â”œâ”€â”€ check-github-actions.bat   # Windowsç‰ˆGitHub Actionsæ£€æŸ¥
â”‚   â”œâ”€â”€ check-project-status.bat   # é¡¹ç›®çŠ¶æ€æ£€æŸ¥
â”‚   â”œâ”€â”€ clean-project.sh          # é¡¹ç›®æ¸…ç†è„šæœ¬
â”‚   â”œâ”€â”€ clean-project.bat         # Windowsç‰ˆé¡¹ç›®æ¸…ç†
â”‚   â””â”€â”€ inject-env-vars.sh        # ç¯å¢ƒå˜é‡æ³¨å…¥è„šæœ¬
â”œâ”€â”€ deploy-production.sh        # ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è„šæœ¬
â”œâ”€â”€ deploy-production.ps1       # Windowsç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è„šæœ¬
â”œâ”€â”€ github-release.sh           # GitHubå‘å¸ƒè„šæœ¬
â”œâ”€â”€ github-release.ps1          # Windows GitHubå‘å¸ƒè„šæœ¬
â”œâ”€â”€ test-separated-build.sh     # åˆ†ç¦»æ„å»ºæµ‹è¯•è„šæœ¬
â””â”€â”€ test-separated-build.ps1    # Windowsåˆ†ç¦»æ„å»ºæµ‹è¯•è„šæœ¬
```

## ğŸ”§ æ„å»ºè„šæœ¬ (`build/`)

### build-image.sh
Dockeré•œåƒæ„å»ºè„šæœ¬ï¼Œæ”¯æŒå‰åç«¯åˆ†ç¦»çš„é•œåƒæ„å»ºã€‚

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- ğŸ³ è‡ªåŠ¨æ„å»ºå‰åç«¯Dockeré•œåƒ
- ğŸ—ï¸ æ”¯æŒå¤šå¹³å°æ„å»ºï¼ˆAMD64/ARM64ï¼‰
- ğŸ·ï¸ è‡ªåŠ¨æ ‡ç­¾ç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶
- âš¡ æ„å»ºç¼“å­˜ä¼˜åŒ–ï¼Œæå‡æ„å»ºé€Ÿåº¦
- ğŸ“Š æ„å»ºè¿‡ç¨‹ç›‘æ§å’Œæ—¥å¿—è®°å½•

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
cd scripts/build
./build-image.sh

# æ„å»ºç‰¹å®šç‰ˆæœ¬
./build-image.sh --version v1.2.0

# æ„å»ºå¹¶æ¨é€åˆ°ä»“åº“
./build-image.sh --push
```

## ğŸš€ å¼€å‘ç¯å¢ƒè„šæœ¬ (`dev/`)

### å¯åŠ¨è„šæœ¬çŸ©é˜µ
| è„šæœ¬æ–‡ä»¶ | å¹³å°æ”¯æŒ | åŠŸèƒ½æè¿° | æ¨èä½¿ç”¨ |
|---------|---------|---------|---------|
| `start-dev.sh` | Linux/macOS | å®Œæ•´å¼€å‘ç¯å¢ƒå¯åŠ¨ | â­â­â­ |
| `start-dev.ps1` | Windows PowerShell | å®Œæ•´å¼€å‘ç¯å¢ƒå¯åŠ¨ | â­â­â­ |
| `start-dev.bat` | Windows CMD | å®Œæ•´å¼€å‘ç¯å¢ƒå¯åŠ¨ | â­â­ |
| `start-simple.bat` | Windows CMD | ç®€åŒ–å¿«é€Ÿå¯åŠ¨ | â­ |
| `start.sh` | Linux/macOS | é€šç”¨å¯åŠ¨è„šæœ¬ | â­â­ |

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- âœ… è‡ªåŠ¨æ£€æŸ¥ç³»ç»Ÿä¾èµ–ï¼ˆNode.js, Yarn, Dockerç­‰ï¼‰
- ğŸ”„ å¹¶è¡Œå¯åŠ¨å‰åç«¯æœåŠ¡ï¼Œæé«˜å¯åŠ¨é€Ÿåº¦
- ğŸ“ å®æ—¶æ—¥å¿—è¾“å‡ºå’Œé¢œè‰²æ ‡è¯†
- ğŸ› ï¸ æ™ºèƒ½é”™è¯¯å¤„ç†å’Œè‡ªåŠ¨æ¢å¤
- ğŸ”§ ç¯å¢ƒå˜é‡è‡ªåŠ¨é…ç½®å’ŒéªŒè¯

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
# Linux/macOS - æ¨èæ–¹å¼
cd scripts/dev
./start-dev.sh

# Windows PowerShell - æ¨èæ–¹å¼
cd scripts/dev
.\start-dev.ps1

# Windows CMD - å…¼å®¹æ–¹å¼
cd scripts\dev
start-dev.bat

# å¿«é€Ÿå¯åŠ¨ï¼ˆWindowsï¼‰
start-simple.bat
```

## ğŸ› ï¸ å·¥å…·è„šæœ¬ (`utils/`)

### é¡¹ç›®ç®¡ç†å·¥å…·é›†

#### check-github-actions (.sh/.bat)
GitHub Actionså·¥ä½œæµç›‘æ§å·¥å…·

**åŠŸèƒ½ï¼š**
- ğŸ“Š æ£€æŸ¥GitHub Actionså·¥ä½œæµçŠ¶æ€
- âœ… éªŒè¯CI/CDé…ç½®å®Œæ•´æ€§
- ğŸ” ç›‘æ§æ„å»ºå’Œéƒ¨ç½²çŠ¶æ€
- ğŸ“ˆ ç”ŸæˆçŠ¶æ€æŠ¥å‘Š

#### check-project-status.bat
é¡¹ç›®æ•´ä½“çŠ¶æ€æ£€æŸ¥å·¥å…·

**åŠŸèƒ½ï¼š**
- ğŸ” æ£€æŸ¥é¡¹ç›®æ•´ä½“å¥åº·çŠ¶æ€
- ğŸ“¦ éªŒè¯ä¾èµ–å®‰è£…å®Œæ•´æ€§
- âš™ï¸ æ£€æŸ¥é…ç½®æ–‡ä»¶æœ‰æ•ˆæ€§
- ğŸš€ ç¯å¢ƒå°±ç»ªçŠ¶æ€è¯„ä¼°

#### clean-project (.sh/.bat)
é¡¹ç›®æ¸…ç†å’Œé‡ç½®å·¥å…·

**åŠŸèƒ½ï¼š**
- ğŸ§¹ æ¸…ç†æ„å»ºäº§ç‰©å’Œä¸´æ—¶æ–‡ä»¶
- ğŸ—‘ï¸ åˆ é™¤node_moduleså’Œç¼“å­˜
- ğŸ”„ é‡ç½®å¼€å‘ç¯å¢ƒåˆ°åˆå§‹çŠ¶æ€
- ğŸ’¾ ä¿æŠ¤é‡è¦é…ç½®æ–‡ä»¶

#### inject-env-vars.sh
ç¯å¢ƒå˜é‡ç®¡ç†å·¥å…·

**åŠŸèƒ½ï¼š**
- ğŸ”§ åŠ¨æ€æ³¨å…¥ç¯å¢ƒå˜é‡
- ğŸŒ æ”¯æŒå¤šç¯å¢ƒé…ç½®åˆ‡æ¢
- âœ… é…ç½®éªŒè¯å’Œæ ¼å¼æ£€æŸ¥
- ğŸ”’ æ•æ„Ÿä¿¡æ¯å®‰å…¨å¤„ç†

## ğŸ“¦ ç”Ÿäº§éƒ¨ç½²è„šæœ¬

### deploy-production (.sh/.ps1)
ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- ğŸš€ é›¶åœæœºéƒ¨ç½²ç­–ç•¥
- ğŸ“¥ è‡ªåŠ¨æ‹‰å–æœ€æ–°Dockeré•œåƒ
- ğŸ¥ å…¨é¢å¥åº·æ£€æŸ¥éªŒè¯
- ğŸ”„ æ™ºèƒ½å›æ»šæœºåˆ¶
- ğŸ“‹ è¯¦ç»†éƒ¨ç½²æ—¥å¿—è®°å½•
- ğŸ” å®‰å…¨é…ç½®éªŒè¯

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# Linux/macOS - å®Œæ•´éƒ¨ç½²
./deploy-production.sh

# Windows PowerShell - å®Œæ•´éƒ¨ç½²
.\deploy-production.ps1

# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
./deploy-production.sh status

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
./deploy-production.sh logs

# æ‰§è¡Œå¥åº·æ£€æŸ¥
./deploy-production.sh health

# åˆ›å»ºéƒ¨ç½²å¤‡ä»½
./deploy-production.sh backup
```

## ğŸš€ å‘å¸ƒç®¡ç†è„šæœ¬

### github-release (.sh/.ps1)
GitHubå‘å¸ƒè‡ªåŠ¨åŒ–ç®¡ç†è„šæœ¬

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- ğŸ“¦ è‡ªåŠ¨åˆ›å»ºGitHub Release
- ğŸ“ æ™ºèƒ½ç”Ÿæˆå˜æ›´æ—¥å¿—
- ğŸ“ ä¸Šä¼ å‘å¸ƒèµ„äº§æ–‡ä»¶
- ğŸ·ï¸ ç‰ˆæœ¬æ ‡ç­¾è‡ªåŠ¨ç®¡ç†
- ğŸ”” å‘å¸ƒé€šçŸ¥å’Œé›†æˆ

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# Linux/macOS - åˆ›å»ºå‘å¸ƒ
./github-release.sh v1.2.0

# Windows PowerShell - åˆ›å»ºå‘å¸ƒ
.\github-release.ps1 -Version "v1.2.0"

# åˆ›å»ºé¢„å‘å¸ƒç‰ˆæœ¬
./github-release.sh v1.2.0-beta --prerelease

# ç”Ÿæˆå˜æ›´æ—¥å¿—
./github-release.sh --changelog-only
```

## ğŸ§ª æµ‹è¯•è„šæœ¬

### test-separated-build (.sh/.ps1)
å‰åç«¯åˆ†ç¦»æ„å»ºæµ‹è¯•è„šæœ¬

**æµ‹è¯•è¦†ç›–ï¼š**
- ğŸ—ï¸ å‰åç«¯åˆ†ç¦»æ„å»ºéªŒè¯
- ğŸ³ Dockeré•œåƒåŠŸèƒ½æµ‹è¯•
- ğŸ”— é›†æˆæµ‹è¯•æ‰§è¡Œ
- ğŸ“Š æµ‹è¯•æŠ¥å‘Šç”Ÿæˆå’Œåˆ†æ
- ğŸš€ éƒ¨ç½²å‰éªŒè¯æ£€æŸ¥

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# Linux/macOS - å®Œæ•´æµ‹è¯•
./test-separated-build.sh

# Windows PowerShell - å®Œæ•´æµ‹è¯•
.\test-separated-build.ps1

# ä»…æ„å»ºæµ‹è¯•
./test-separated-build.sh --build-only

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
./test-separated-build.sh --report
```

## ğŸ”§ ä½¿ç”¨æŒ‡å—

### ç¯å¢ƒå‡†å¤‡

#### æƒé™è®¾ç½®
```bash
# Linux/macOS - è®¾ç½®æ‰§è¡Œæƒé™
find scripts -name "*.sh" -exec chmod +x {} \;

# Windows - è®¾ç½®PowerShellæ‰§è¡Œç­–ç•¥
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

#### ç³»ç»Ÿè¦æ±‚
| ç»„ä»¶ | æœ€ä½ç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ | ç”¨é€” |
|------|---------|---------|------|
| Bash | 4.0+ | 5.0+ | Linux/macOSè„šæœ¬æ‰§è¡Œ |
| PowerShell | 5.1+ | 7.0+ | Windowsè„šæœ¬æ‰§è¡Œ |
| Docker | 20.10+ | 24.0+ | å®¹å™¨åŒ–éƒ¨ç½² |
| Node.js | 16.0+ | 18.0+ | åº”ç”¨è¿è¡Œç¯å¢ƒ |
| Git | 2.20+ | 2.40+ | ç‰ˆæœ¬æ§åˆ¶ |

### é…ç½®æ–‡ä»¶ä¾èµ–
```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ docker-compose.yml     # Dockerç¼–æ’é…ç½®
â””â”€â”€ deployment/.env        # éƒ¨ç½²ç¯å¢ƒé…ç½®
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜è§£å†³

#### æƒé™ç›¸å…³é”™è¯¯
```bash
# é—®é¢˜ï¼šPermission denied
# è§£å†³ï¼šè®¾ç½®æ‰§è¡Œæƒé™
chmod +x scripts/**/*.sh

# Windows PowerShellæ‰§è¡Œç­–ç•¥
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

#### ä¾èµ–ç¼ºå¤±é—®é¢˜
```bash
# é—®é¢˜ï¼šCommand not found
# è§£å†³ï¼šæ£€æŸ¥å¹¶å®‰è£…ä¾èµ–
./scripts/utils/check-project-status.bat

# å®‰è£…Node.jsä¾èµ–
npm install
yarn install
```

#### ç¯å¢ƒå˜é‡é—®é¢˜
```bash
# é—®é¢˜ï¼šç¯å¢ƒå˜é‡æ ¼å¼é”™è¯¯
# è§£å†³ï¼šä¿®å¤ç¯å¢ƒå˜é‡æ ¼å¼
./deployment/fix-env-format.sh

# æ£€æŸ¥ç¯å¢ƒå˜é‡
./scripts/utils/inject-env-vars.sh --check
```

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [éƒ¨ç½²æŒ‡å—](../deployment/README.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é…ç½®
- [å¼€å‘æ–‡æ¡£](../docs/development/) - å¼€å‘ç¯å¢ƒå’ŒæŠ€æœ¯æ–‡æ¡£
- [æµ‹è¯•æ–‡æ¡£](../testing/README.md) - æµ‹è¯•ç­–ç•¥å’Œå·¥å…·
- [å·¥å…·é…ç½®](../tools/README.md) - å¼€å‘å·¥å…·å’Œé…ç½®

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.1  
**æœ€åæ›´æ–°**: 2024å¹´12æœˆ  
**ç»´æŠ¤çŠ¶æ€**: âœ… æ´»è·ƒç»´æŠ¤
