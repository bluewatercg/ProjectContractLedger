# 前后端分离部署环境变量配置模板
# 复制此文件为 .env 并填写实际配置值

# ===========================================
# 基础配置
# ===========================================
NODE_ENV=production

# ===========================================
# API版本配置
# ===========================================
# API版本 (支持 v1, v2, v3, v4, v5... 任意版本)
API_VERSION=v1

# 前端API基础URL (自动使用上面的版本号)
FRONTEND_API_BASE_URL=/api/v1

# 最新可用版本 (用于版本检查和升级提示)
LATEST_API_VERSION=v1

# 版本兼容性设置
# 最低支持版本 (低于此版本的API将返回不支持错误)
MIN_SUPPORTED_VERSION=v1

# 弃用警告版本 (使用此版本及以下会收到弃用警告)
DEPRECATED_VERSION_THRESHOLD=v1

# ===========================================
# 服务端口配置
# ===========================================
# 宿主机端口映射配置（可根据实际环境调整）

# 前端服务端口映射
# 格式: 宿主机端口:容器内端口
FRONTEND_HOST_PORT=8000        # 宿主机端口（外部访问）
FRONTEND_CONTAINER_PORT=80     # 容器内端口（镜像内部）

# 后端服务端口映射
BACKEND_HOST_PORT=8080         # 宿主机端口（外部访问）
BACKEND_CONTAINER_PORT=8080    # 容器内端口（镜像内部）

# Nginx代理端口映射（仅在使用代理模式时需要）
PROXY_HOST_PORT=8001           # 宿主机端口（外部访问）
PROXY_CONTAINER_PORT=80        # 容器内端口（镜像内部）

# 兼容性配置（保持向后兼容）
FRONTEND_PORT=${FRONTEND_HOST_PORT}
BACKEND_PORT=${BACKEND_HOST_PORT}
PROXY_PORT=${PROXY_HOST_PORT}

# ===========================================
# 网络配置
# ===========================================
# 网络模式: bridge 或 host
NETWORK_MODE=bridge

# 服务器IP地址配置（用于前后端通讯）
BACKEND_HOST=192.168.1.115
FRONTEND_HOST=192.168.1.115

# 访问地址示例（根据上面的端口配置）:
# - 前端: http://192.168.1.115:8000
# - 后端: http://192.168.1.115:8080
# - 代理: http://192.168.1.115:8001

# ===========================================
# 外部MySQL数据库配置
# ===========================================
DB_HOST=192.168.1.254
DB_PORT=3306
DB_USERNAME=your_db_username
DB_PASSWORD=your_db_password
DB_DATABASE=procontractledger
DB_POOL_SIZE=20

# ===========================================
# 外部Redis配置
# ===========================================
REDIS_HOST=192.168.1.160
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=13

# ===========================================
# JWT配置
# ===========================================
JWT_SECRET=your_jwt_secret_key_here
JWT_EXPIRES_IN=7d

# ===========================================
# 应用配置
# ===========================================
LOG_LEVEL=info
CORS_ORIGINS=*

# 时区配置
TZ=Asia/Shanghai

# ===========================================
# 文件上传配置
# ===========================================
UPLOAD_DIR=/app/uploads

# ===========================================
# 配置说明
# ===========================================
# 1. DB_USERNAME, DB_PASSWORD: 必须填写，用于连接外部MySQL数据库
# 2. JWT_SECRET: 必须填写，用于JWT令牌签名，建议使用随机字符串
# 3. REDIS_PASSWORD: 如果Redis设置了密码则填写，否则留空
# 4. BACKEND_HOST, FRONTEND_HOST: 根据实际部署环境的IP地址调整
# 5. 端口配置可根据实际需要调整，确保不与其他服务冲突
# 6. 数据库和Redis的IP地址根据实际环境调整

# ===========================================
# 安全提醒
# ===========================================
# - 请确保JWT_SECRET使用强随机字符串
# - 数据库密码应使用强密码
# - 生产环境中请限制CORS_ORIGINS的值
# - 定期更新密码和密钥
