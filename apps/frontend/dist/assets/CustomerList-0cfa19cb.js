/* empty css                  *//* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";import{d as R,r as n,o as j,c as A,b as u,e as t,w as s,N as q,L as G,h as H,z as w,v as J,p as K,Q as W,R as X,S as Y,P as Z,l as z,g as c,t as x,y as ee,n as te,F as ae,T as oe,U as se,O as le}from"./index-d25e5bb6.js";import{c as E}from"./customer-dc2497e6.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";const re={class:"page-container"},ie={class:"page-header"},ue={class:"table-container"},ce={class:"table-toolbar"},pe={class:"table-search"},de={class:"pagination-container"},_e=R({__name:"CustomerList",setup(me){const f=H(),d=n(!1),C=n([]),_=n(""),m=n(""),r=n(1),v=n(10),h=n(0),S=o=>new Date(o).toLocaleDateString("zh-CN"),i=async()=>{try{d.value=!0;const o=await E.getCustomers({page:r.value,limit:v.value,search:_.value,status:m.value});o.success&&o.data&&(C.value=o.data.items,h.value=o.data.total)}catch(o){console.error("Failed to fetch customers:",o)}finally{d.value=!1}},k=()=>{r.value=1,i()},V=()=>{r.value=1,i()},B=()=>{r.value=1,i()},T=()=>{i()},$=o=>{f.push(`/customers/${o}`)},D=o=>{f.push(`/customers/${o}/edit`)},L=async o=>{try{await ee.confirm("确定要删除这个客户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),(await E.deleteCustomer(o)).success&&(te.success("删除成功"),i())}catch(e){e!=="cancel"&&console.error("Failed to delete customer:",e)}};return j(()=>{i()}),(o,e)=>{const P=w("Plus"),y=ae,p=J,F=w("Search"),I=K,g=oe,N=W,l=se,U=le,M=X,O=Y,Q=Z;return z(),A("div",re,[u("div",ie,[e[6]||(e[6]=u("h2",{class:"page-title"},"客户管理",-1)),t(p,{type:"primary",onClick:e[0]||(e[0]=a=>o.$router.push("/customers/create"))},{default:s(()=>[t(y,null,{default:s(()=>[t(P)]),_:1}),e[5]||(e[5]=c(" 新建客户 "))]),_:1,__:[5]})]),u("div",ue,[u("div",ce,[u("div",pe,[t(I,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=a=>_.value=a),placeholder:"搜索客户名称、联系人或电话",style:{width:"300px"},onInput:k},{prefix:s(()=>[t(y,null,{default:s(()=>[t(F)]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=a=>m.value=a),placeholder:"状态筛选",style:{width:"120px"},onChange:V},{default:s(()=>[t(g,{label:"全部",value:""}),t(g,{label:"活跃",value:"active"}),t(g,{label:"停用",value:"inactive"})]),_:1},8,["modelValue"])])]),q((z(),G(M,{data:C.value,style:{width:"100%"}},{default:s(()=>[t(l,{prop:"id",label:"ID",width:"80"}),t(l,{prop:"name",label:"客户名称"}),t(l,{prop:"contact_person",label:"联系人"}),t(l,{prop:"phone",label:"电话"}),t(l,{prop:"email",label:"邮箱"}),t(l,{prop:"status",label:"状态",width:"100"},{default:s(({row:a})=>[t(U,{type:a.status==="active"?"success":"danger"},{default:s(()=>[c(x(a.status==="active"?"活跃":"停用"),1)]),_:2},1032,["type"])]),_:1}),t(l,{prop:"created_at",label:"创建时间",width:"180"},{default:s(({row:a})=>[c(x(S(a.created_at)),1)]),_:1}),t(l,{label:"操作",width:"200"},{default:s(({row:a})=>[t(p,{size:"small",onClick:b=>$(a.id)},{default:s(()=>e[7]||(e[7]=[c("查看")])),_:2,__:[7]},1032,["onClick"]),t(p,{size:"small",type:"primary",onClick:b=>D(a.id)},{default:s(()=>e[8]||(e[8]=[c("编辑")])),_:2,__:[8]},1032,["onClick"]),t(p,{size:"small",type:"danger",onClick:b=>L(a.id)},{default:s(()=>e[9]||(e[9]=[c("删除")])),_:2,__:[9]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Q,d.value]]),u("div",de,[t(O,{"current-page":r.value,"onUpdate:currentPage":e[3]||(e[3]=a=>r.value=a),"page-size":v.value,"onUpdate:pageSize":e[4]||(e[4]=a=>v.value=a),total:h.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:B,onCurrentChange:T},null,8,["current-page","page-size","total"])])])])}}});const Ve=ne(_e,[["__scopeId","data-v-897cd0f2"]]);export{Ve as default};
