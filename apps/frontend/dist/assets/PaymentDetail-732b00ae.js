/* empty css                  *//* empty css                   *//* empty css                             *//* empty css               */import{d as L,r as k,x as z,o as F,c as v,b as i,e as a,w as e,N as R,L as A,M as D,h as O,i as W,n as $,v as j,V as q,P as G,l as p,g as l,t as s,W as H,O as J}from"./index-94d61daa.js";import{p as K}from"./payment-73077a14.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";const U={class:"page-container"},X={class:"page-header"},Y={class:"notes-content"},Z={key:1,class:"related-info"},ee=L({__name:"PaymentDetail",setup(te){const f=O(),N=W(),m=k(!1),t=k(),y=z(()=>Number(N.params.id)),d=n=>new Intl.NumberFormat("zh-CN").format(n),_=n=>new Date(n).toLocaleString("zh-CN"),w=n=>({cash:"现金",bank_transfer:"银行转账",check:"支票",credit_card:"信用卡",other:"其他"})[n]||n,C=n=>({pending:"warning",completed:"success",failed:"danger"})[n]||"info",I=n=>({pending:"待处理",completed:"已完成",failed:"失败"})[n]||n,P=n=>({draft:"info",sent:"warning",paid:"success",overdue:"danger",cancelled:"primary"})[n]||"info",B=n=>({draft:"草稿",sent:"已开票",paid:"已支付",overdue:"逾期",cancelled:"已取消"})[n]||n,T=async()=>{try{m.value=!0;const n=await K.getPaymentById(y.value);n.success&&n.data&&(t.value=n.data)}catch(n){console.error("Failed to fetch payment:",n),$.error("获取支付信息失败")}finally{m.value=!1}},E=()=>{f.push(`/payments/${y.value}/edit`)},S=()=>{f.go(-1)};return F(()=>{T()}),(n,u)=>{var M;const b=j,o=H,g=J,h=q,V=G;return p(),v("div",U,[i("div",X,[u[2]||(u[2]=i("h2",{class:"page-title"},"支付详情",-1)),i("div",null,[a(b,{onClick:S},{default:e(()=>u[0]||(u[0]=[l("返回")])),_:1,__:[0]}),a(b,{type:"primary",onClick:E},{default:e(()=>u[1]||(u[1]=[l("编辑")])),_:1,__:[1]})])]),R((p(),v("div",null,[t.value?(p(),A(h,{key:0,column:2,border:""},{default:e(()=>[a(o,{label:"支付ID"},{default:e(()=>[l(s(t.value.id),1)]),_:1}),a(o,{label:"关联发票"},{default:e(()=>{var r;return[l(s(((r=t.value.invoice)==null?void 0:r.invoice_number)||"-"),1)]}),_:1}),a(o,{label:"客户名称"},{default:e(()=>{var r,c,x;return[l(s(((x=(c=(r=t.value.invoice)==null?void 0:r.contract)==null?void 0:c.customer)==null?void 0:x.name)||"-"),1)]}),_:1}),a(o,{label:"合同标题"},{default:e(()=>{var r,c;return[l(s(((c=(r=t.value.invoice)==null?void 0:r.contract)==null?void 0:c.title)||"-"),1)]}),_:1}),a(o,{label:"支付金额"},{default:e(()=>[l("¥"+s(d(t.value.amount)),1)]),_:1}),a(o,{label:"支付日期"},{default:e(()=>[l(s(_(t.value.payment_date)),1)]),_:1}),a(o,{label:"支付方式"},{default:e(()=>[l(s(w(t.value.payment_method)),1)]),_:1}),a(o,{label:"参考号码"},{default:e(()=>[l(s(t.value.reference_number||"-"),1)]),_:1}),a(o,{label:"支付状态"},{default:e(()=>[a(g,{type:C(t.value.status)},{default:e(()=>[l(s(I(t.value.status)),1)]),_:1},8,["type"])]),_:1}),a(o,{label:"创建时间"},{default:e(()=>[l(s(_(t.value.created_at)),1)]),_:1}),a(o,{label:"更新时间"},{default:e(()=>[l(s(_(t.value.updated_at)),1)]),_:1}),a(o,{label:"备注",span:2},{default:e(()=>[i("div",Y,s(t.value.notes||"-"),1)]),_:1})]),_:1})):D("",!0),(M=t.value)!=null&&M.invoice?(p(),v("div",Z,[u[3]||(u[3]=i("h3",null,"关联发票信息",-1)),a(h,{column:2,border:""},{default:e(()=>[a(o,{label:"发票编号"},{default:e(()=>[l(s(t.value.invoice.invoice_number),1)]),_:1}),a(o,{label:"发票金额"},{default:e(()=>[l("¥"+s(d(t.value.invoice.amount)),1)]),_:1}),a(o,{label:"税率"},{default:e(()=>[l(s(t.value.invoice.tax_rate)+"%",1)]),_:1}),a(o,{label:"税额"},{default:e(()=>[l("¥"+s(d(t.value.invoice.tax_amount)),1)]),_:1}),a(o,{label:"总金额"},{default:e(()=>[l("¥"+s(d(t.value.invoice.total_amount)),1)]),_:1}),a(o,{label:"发票状态"},{default:e(()=>[a(g,{type:P(t.value.invoice.status)},{default:e(()=>[l(s(B(t.value.invoice.status)),1)]),_:1},8,["type"])]),_:1}),a(o,{label:"开票日期"},{default:e(()=>[l(s(_(t.value.invoice.issue_date)),1)]),_:1})]),_:1})])):D("",!0)])),[[V,m.value]])])}}});const ce=Q(ee,[["__scopeId","data-v-88d4f1a4"]]);export{ce as default};
