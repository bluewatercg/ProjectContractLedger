/* empty css                  *//* empty css                   *//* empty css                             *//* empty css               */import{d as x,r as f,x as E,o as V,c as v,b as c,e as o,w as e,N as I,L as S,M as T,h as L,i as z,n as F,v as R,V as A,P as O,l as d,g as s,t as n,W as P,O as W}from"./index-1e642474.js";import{c as $}from"./contract-f9d1be3d.js";const j={class:"page-container"},q={class:"page-header"},G={style:{"white-space":"pre-wrap"}},Z=x({__name:"ContractDetail",setup(H){const i=L(),g=z(),u=f(!1),a=f(),p=E(()=>Number(g.params.id)),b=t=>new Intl.NumberFormat("zh-CN").format(t),y=t=>new Date(t).toLocaleString("zh-CN"),C=t=>({draft:"",active:"success",completed:"info",cancelled:"danger"})[t]||"",h=t=>({draft:"草稿",active:"执行中",completed:"已完成",cancelled:"已取消"})[t]||t,N=async()=>{try{u.value=!0;const t=await $.getContractById(p.value);t.success&&t.data&&(a.value=t.data)}catch(t){console.error("Failed to fetch contract:",t),F.error("获取合同信息失败")}finally{u.value=!1}},w=()=>{i.push(`/contracts/${p.value}/edit`)},k=()=>{i.go(-1)};return V(()=>{N()}),(t,r)=>{const _=R,l=P,B=W,D=A,M=O;return d(),v("div",j,[c("div",q,[r[2]||(r[2]=c("h2",{class:"page-title"},"合同详情",-1)),c("div",null,[o(_,{onClick:k},{default:e(()=>r[0]||(r[0]=[s("返回")])),_:1,__:[0]}),o(_,{type:"primary",onClick:w},{default:e(()=>r[1]||(r[1]=[s("编辑")])),_:1,__:[1]})])]),I((d(),v("div",null,[a.value?(d(),S(D,{key:0,column:2,border:""},{default:e(()=>[o(l,{label:"合同编号"},{default:e(()=>[s(n(a.value.contract_number),1)]),_:1}),o(l,{label:"合同标题"},{default:e(()=>[s(n(a.value.title),1)]),_:1}),o(l,{label:"客户名称"},{default:e(()=>{var m;return[s(n(((m=a.value.customer)==null?void 0:m.name)||"-"),1)]}),_:1}),o(l,{label:"合同金额"},{default:e(()=>[s("¥"+n(b(a.value.total_amount)),1)]),_:1}),o(l,{label:"开始日期"},{default:e(()=>[s(n(a.value.start_date),1)]),_:1}),o(l,{label:"结束日期"},{default:e(()=>[s(n(a.value.end_date),1)]),_:1}),o(l,{label:"状态"},{default:e(()=>[o(B,{type:C(a.value.status)},{default:e(()=>[s(n(h(a.value.status)),1)]),_:1},8,["type"])]),_:1}),o(l,{label:"创建时间"},{default:e(()=>[s(n(y(a.value.created_at)),1)]),_:1}),o(l,{label:"合同描述",span:2},{default:e(()=>[s(n(a.value.description||"-"),1)]),_:1}),o(l,{label:"合同条款",span:2},{default:e(()=>[c("div",G,n(a.value.terms||"-"),1)]),_:1}),o(l,{label:"备注",span:2},{default:e(()=>[s(n(a.value.notes||"-"),1)]),_:1})]),_:1})):T("",!0)])),[[M,u.value]])])}}});export{Z as default};
