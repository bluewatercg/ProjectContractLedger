/* empty css                  *//* empty css                   *//* empty css                             *//* empty css               */import{d as M,r as g,x as E,o as V,c as b,b as d,e as o,w as e,N as S,L as T,M as L,h as z,i as F,n as R,v as A,V as O,P,l as _,g as s,t as n,W,O as $}from"./index-1e642474.js";import{i as j}from"./invoice-657a2ee3.js";const q={class:"page-container"},G={class:"page-header"},Z=M({__name:"InvoiceDetail",setup(H){const p=z(),y=F(),c=g(!1),t=g(),v=E(()=>Number(y.params.id)),i=a=>new Intl.NumberFormat("zh-CN").format(a),N=a=>new Date(a).toLocaleString("zh-CN"),h=a=>({draft:"",sent:"warning",paid:"success",overdue:"danger",cancelled:"info"})[a]||"",x=a=>({draft:"草稿",sent:"已发送",paid:"已支付",overdue:"逾期",cancelled:"已取消"})[a]||a,C=async()=>{try{c.value=!0;const a=await j.getInvoiceById(v.value);a.success&&a.data&&(t.value=a.data)}catch(a){console.error("Failed to fetch invoice:",a),R.error("获取发票信息失败")}finally{c.value=!1}},I=()=>{p.push(`/invoices/${v.value}/edit`)},k=()=>{p.go(-1)};return V(()=>{C()}),(a,r)=>{const m=A,l=W,w=$,B=O,D=P;return _(),b("div",q,[d("div",G,[r[2]||(r[2]=d("h2",{class:"page-title"},"发票详情",-1)),d("div",null,[o(m,{onClick:k},{default:e(()=>r[0]||(r[0]=[s("返回")])),_:1,__:[0]}),o(m,{type:"primary",onClick:I},{default:e(()=>r[1]||(r[1]=[s("编辑")])),_:1,__:[1]})])]),S((_(),b("div",null,[t.value?(_(),T(B,{key:0,column:2,border:""},{default:e(()=>[o(l,{label:"发票编号"},{default:e(()=>[s(n(t.value.invoice_number),1)]),_:1}),o(l,{label:"合同标题"},{default:e(()=>{var u;return[s(n(((u=t.value.contract)==null?void 0:u.title)||"-"),1)]}),_:1}),o(l,{label:"客户名称"},{default:e(()=>{var u,f;return[s(n(((f=(u=t.value.contract)==null?void 0:u.customer)==null?void 0:f.name)||"-"),1)]}),_:1}),o(l,{label:"发票金额"},{default:e(()=>[s("¥"+n(i(t.value.amount)),1)]),_:1}),o(l,{label:"税率"},{default:e(()=>[s(n(t.value.tax_rate)+"%",1)]),_:1}),o(l,{label:"税额"},{default:e(()=>[s("¥"+n(i(t.value.tax_amount)),1)]),_:1}),o(l,{label:"总金额"},{default:e(()=>[s("¥"+n(i(t.value.total_amount)),1)]),_:1}),o(l,{label:"开票日期"},{default:e(()=>[s(n(t.value.issue_date),1)]),_:1}),o(l,{label:"状态"},{default:e(()=>[o(w,{type:h(t.value.status)},{default:e(()=>[s(n(x(t.value.status)),1)]),_:1},8,["type"])]),_:1}),o(l,{label:"创建时间"},{default:e(()=>[s(n(N(t.value.created_at)),1)]),_:1}),o(l,{label:"发票描述",span:2},{default:e(()=>[s(n(t.value.description||"-"),1)]),_:1}),o(l,{label:"备注",span:2},{default:e(()=>[s(n(t.value.notes||"-"),1)]),_:1})]),_:1})):L("",!0)])),[[D,c.value]])])}}});export{Z as default};
