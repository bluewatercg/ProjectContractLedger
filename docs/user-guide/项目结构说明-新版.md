# 客户合同管理系统 - 项目结构说明 (重组版)

## 项目概述

本项目是基于Midway.js框架开发的客户合同管理系统，采用前后端分离架构，支持Docker容器化部署。

经过重组后，项目结构更加清晰和规范，便于长期维护和团队协作。

## 新版目录结构

```
ProjectContractLedger/
├── apps/                        # 应用程序目录
│   ├── backend/                 # 后端应用 (原 midway-backend)
│   │   ├── src/                 # 源代码
│   │   │   ├── controller/      # 控制器
│   │   │   ├── service/         # 业务服务
│   │   │   ├── entity/          # 数据实体
│   │   │   ├── config/          # 配置文件
│   │   │   └── middleware/      # 中间件
│   │   ├── dist/                # 构建输出
│   │   ├── test/                # 测试文件
│   │   ├── package.json         # 后端依赖配置
│   │   └── tsconfig.json        # TypeScript配置
│   └── frontend/                # 前端应用 (原 midway-frontend)
│       ├── src/                 # 源代码
│       │   ├── components/      # Vue组件
│       │   ├── views/           # 页面视图
│       │   ├── api/             # API接口
│       │   ├── stores/          # 状态管理
│       │   └── utils/           # 工具函数
│       ├── dist/                # 构建输出
│       ├── package.json         # 前端依赖配置
│       └── vite.config.ts       # Vite配置
│
├── database/                    # 数据库相关
│   ├── migrations/              # 数据库迁移文件
│   ├── scripts/                 # 数据库脚本
│   │   ├── mysql_init.sql       # 初始化脚本
│   │   ├── seed_data.sql        # 种子数据
│   │   ├── queries.sql          # 查询示例
│   │   └── apply-mysql-indexes.js # 索引应用脚本
│   └── diagrams/                # 数据库设计图
│
├── deployment/                  # 部署配置
│   ├── scripts/                 # 部署脚本
│   ├── docs/                    # 部署文档
│   └── *.yml                    # Docker Compose配置
│
├── docs/                        # 项目文档 (重组)
│   ├── api/                     # API文档
│   │   └── backend_service/     # 后端服务文档
│   ├── development/             # 开发文档
│   │   ├── API_Development_Guide.md
│   │   ├── Database_Design.md
│   │   ├── GitHub_Actions_部署指南.md
│   │   └── Docker_Deployment.md
│   ├── user-guide/              # 用户指南
│   │   ├── 启动指南.md
│   │   ├── 快速部署指南.md
│   │   ├── 项目结构说明.md
│   │   ├── PRD.md
│   │   ├── Roadmap.md
│   │   └── 业务状态关系说明.md
│   └── design/                  # 设计文档 (原 design 目录)
│       ├── Flowchart.md
│       ├── prototypes/
│       └── specs/
│
├── scripts/                     # 项目脚本 (新建)
│   ├── dev/                     # 开发脚本
│   │   ├── start-dev.bat        # Windows开发启动
│   │   ├── start-dev.ps1        # PowerShell启动
│   │   ├── start-dev.sh         # Linux/Mac启动
│   │   ├── start-simple.bat     # 简单启动
│   │   └── start.sh             # 生产启动脚本
│   ├── build/                   # 构建脚本 (预留)
│   └── utils/                   # 工具脚本
│       ├── check-github-actions.bat
│       └── check-github-actions.sh
│
├── testing/                     # 测试相关
│   ├── docs/                    # 测试文档
│   ├── backend/                 # 后端测试
│   ├── frontend/                # 前端测试
│   ├── integration/             # 集成测试
│   ├── performance/             # 性能测试
│   └── scripts/                 # 测试脚本
│
├── tools/                       # 工具和配置 (新建)
│   ├── docker/                  # Docker配置文件
│   │   ├── Dockerfile           # 主Dockerfile
│   │   ├── docker-compose.yml   # 开发环境
│   │   ├── docker-compose.prod.yml # 生产环境
│   │   └── docker-compose.external-simple.yml
│   ├── nginx/                   # Nginx配置
│   │   └── nginx.conf
│   └── configs/                 # 其他配置文件 (预留)
│
├── package.json                 # 根项目配置
├── yarn.lock                    # 依赖锁定文件
├── README.md                    # 主要说明文档 (英文)
└── README.zh-CN.md              # 中文说明文档 (原 README-MIDWAY.md)
```

## 重组说明

### 主要变更

1. **应用程序统一管理**
   - `midway-backend/` → `apps/backend/`
   - `midway-frontend/` → `apps/frontend/`
   - 所有应用程序集中在 `apps/` 目录下

2. **脚本文件分类管理**
   - 开发脚本：`scripts/dev/`
   - 构建脚本：`scripts/build/`
   - 工具脚本：`scripts/utils/`

3. **配置文件集中管理**
   - Docker配置：`tools/docker/`
   - Nginx配置：`tools/nginx/`
   - 其他配置：`tools/configs/`

4. **文档结构重组**
   - API文档：`docs/api/`
   - 开发文档：`docs/development/`
   - 用户指南：`docs/user-guide/`
   - 设计文档：`docs/design/`

### 路径更新

所有相关的配置文件和脚本中的路径引用已经更新：

- `package.json` 中的脚本路径
- 启动脚本中的应用路径
- Docker配置文件中的构建路径
- 文档中的引用路径

## 使用指南

### 开发环境启动

```bash
# Windows
scripts/dev/start-simple.bat

# PowerShell
scripts/dev/start-dev.ps1

# Linux/Mac
scripts/dev/start-dev.sh
```

### 使用npm脚本

```bash
# 安装所有依赖
npm run install-all

# 启动开发环境
npm run dev

# 构建所有应用
npm run build-all

# 数据库操作
npm run apply-indexes
npm run test-db
npm run db-info

# 性能测试
npm run performance-test
```

### Docker部署

```bash
# 开发环境
docker-compose -f tools/docker/docker-compose.yml up -d

# 生产环境
docker-compose -f tools/docker/docker-compose.prod.yml up -d
```

## 优势

1. **结构清晰**：按功能分类，便于查找和维护
2. **扩展性好**：新增应用或工具有明确的放置位置
3. **团队协作**：统一的目录结构便于团队成员理解
4. **CI/CD友好**：清晰的构建路径便于自动化部署
5. **文档完善**：分类明确的文档结构便于查阅

## 迁移注意事项

1. **IDE配置**：需要更新IDE中的项目路径配置
2. **环境变量**：检查是否有硬编码的路径需要更新
3. **部署脚本**：确认所有部署相关脚本的路径正确
4. **文档链接**：更新文档中的内部链接引用

这次重组让项目结构更加专业和规范，为项目的长期发展奠定了良好的基础。
